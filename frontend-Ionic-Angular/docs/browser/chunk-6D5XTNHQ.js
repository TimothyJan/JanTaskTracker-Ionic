import{a as M}from"./chunk-CQT7YVAY.js";import{a as b}from"./chunk-5W6OI3HN.js";import{a as F}from"./chunk-FRM2HGHV.js";import{a as N}from"./chunk-PKOGN4VO.js";import{a as ve}from"./chunk-GJZEQUDA.js";import{a as he,c as ge}from"./chunk-K4MEQIZ7.js";import{$ as re,A as f,C as T,Ca as ye,D as w,Da as P,E as R,Ga as ue,Ha as fe,Ia as q,J as te,K as I,Ka as _e,L as j,N as C,Na as Ee,Oa as H,Pa as U,V as g,W as k,X as oe,Y as ie,Z as O,_ as ne,aa as le,ba as me,ca as S,da as ae,f as Y,g as Z,i as p,j as y,ja as D,k as h,ka as pe,l as _,la as L,m as c,ma as W,na as B,oa as z,pa as se,q as l,qa as V,r,s as E,sa as de,t as $,ta as ce,u,ua as A,v,w as K,wa as G,x as ee,y as m}from"./chunk-BR66K6D3.js";import"./chunk-IPXLKNFD.js";import"./chunk-7KGURMOZ.js";import"./chunk-ZYUIEBGB.js";import"./chunk-5Z6BILBO.js";import"./chunk-ETSLECS3.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-C3VUKG7J.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as x,b as X,f as J}from"./chunk-RW4GY4BD.js";function we(n,i){if(n&1&&(l(0,"ion-select-option",10),m(1),r()),n&2){let s=i.$implicit;c("value",s.departmentID),p(),f(" ",s.departmentName," ")}}function Re(n,i){if(n&1&&(l(0,"ion-select-option",10),m(1),r()),n&2){let s=i.$implicit;c("value",s.roleID),p(),f(" ",s.roleName," ")}}function Oe(n,i){if(n&1&&(l(0,"div")(1,"ion-select",11)(2,"div",4),m(3,"Role"),r(),_(4,Re,2,2,"ion-select-option",5),r()()),n&2){let s=v();p(4),c("ngForOf",s.roles)}}var Fe=(()=>{let i=class i{constructor(t,e,o,d){this._employeeService=t,this._departmentService=e,this._roleService=o,this._toastService=d,this.departments=[],this.roles=[],this.employeeForm=new ie({name:new O("",[g.required,g.minLength(2),g.maxLength(100)]),salary:new O(0,[g.min(0),g.required]),departmentID:new O(-1,g.required),roleID:new O(null,g.required)})}ngOnInit(){this.departments=this._departmentService.getDepartments(),this.capitalizeEmployeeName()}departmentSelectionChange(t){this.getRolesFromDepartmentID(t.detail.value)}getRolesFromDepartmentID(t){this.roles=this._roleService.getRolesFromDepartmentID(t)}onSubmit(){if(this.employeeForm.valid){let t=X(x({},this.employeeForm.value),{departmentID:Number(this.employeeForm.value.departmentID),roleID:Number(this.employeeForm.value.roleID)});this._employeeService.addEmployee(t),this.employeeForm.reset(),this._employeeService.notifyEmployeesChanged(),this._toastService.presentSuccessToast("Employee created.")}else this._toastService.presentErrorToast("Employee failed to be created.")}capitalizeEmployeeName(){var t;(t=this.employeeForm.get("name"))==null||t.valueChanges.subscribe(e=>{var o;e&&((o=this.employeeForm.get("name"))==null||o.setValue(e.toUpperCase(),{emitEvent:!1}))})}};i.\u0275fac=function(e){return new(e||i)(y(M),y(b),y(F),y(N))},i.\u0275cmp=h({type:i,selectors:[["app-employee-create"]],decls:15,vars:4,consts:[[1,"ion-card"],[1,"ion-text-center"],[3,"ngSubmit","formGroup"],["id","departmentID","formControlName","departmentID","placeholder","Select a Department",3,"ionChange"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["id","employeeSalary","type","number","label","Salary: ","formControlName","salary","placeholder","Enter Employee Salary"],["id","employeeName","label","Employee Name: ","formControlName","name","placeholder","Enter Employee Name"],["expand","block","type","submit",3,"click","disabled"],[3,"value"],["id","roleID","formControlName","roleID","placeholder","Select a Role"]],template:function(e,o){e&1&&(l(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-card-title"),m(3," Add New Employee "),r()(),l(4,"ion-card-content")(5,"form",2),u("ngSubmit",function(){return o.onSubmit()}),l(6,"ion-select",3),u("ionChange",function(a){return o.departmentSelectionChange(a)}),l(7,"div",4),m(8,"Department: "),r(),_(9,we,2,2,"ion-select-option",5),r(),_(10,Oe,5,1,"div",6),E(11,"ion-input",7)(12,"ion-input",8),l(13,"ion-button",9),u("click",function(){return o.onSubmit()}),m(14," Add Employee "),r()()()()),e&2&&(p(5),c("formGroup",o.employeeForm),p(4),c("ngForOf",o.departments),p(),c("ngIf",o.employeeForm.get("departmentID").value!==-1),p(3),c("disabled",o.employeeForm.invalid))},dependencies:[C,I,j,S,re,k,oe,ae,le,me,L,B,z,W,H,D,U,P],encapsulation:2});let n=i;return n})();function ke(n,i){if(n&1&&(l(0,"ion-select-option",11),m(1),r()),n&2){let s=i.$implicit;c("value",s.departmentID),p(),f(" ",s.departmentName," ")}}function Le(n,i){if(n&1&&(l(0,"ion-select-option",11),m(1),r()),n&2){let s=i.$implicit;c("value",s.roleID),p(),f(" ",s.roleName," ")}}var Ne=(()=>{let i=class i{constructor(t,e,o,d,a){this.modalCtrl=t,this._employeeService=e,this._departmentService=o,this._roleService=d,this._toastService=a,this.employeeID=-1,this.originalEmployee={employeeID:-1,name:"",salary:-1,departmentID:-1,roleID:-1},this.editedEmployee={employeeID:-1,name:"",salary:-1,departmentID:-1,roleID:-1},this.departments=[],this.filteredRoles=[]}ngOnInit(){this.getEmployee(),this.departments=this._departmentService.getDepartments(),this.filteredRoles=this._roleService.getRolesFromDepartmentID(this.originalEmployee.departmentID)}getEmployee(){let t=this._employeeService.getEmployee(this.employeeID);if(!t){console.error("Employee not found"),this.modalCtrl.dismiss(null,"error");return}this.originalEmployee=x({},t),this.editedEmployee=x({},t)}changeFilteredRoles(t){this.filteredRoles=this._roleService.getRolesFromDepartmentID(this.editedEmployee.departmentID)}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.saveChanges(),this.modalCtrl.dismiss(this.employeeID,"confirm")}saveChanges(){this._employeeService.updateEmployee(this.editedEmployee),this._employeeService.notifyEmployeesChanged(),this._toastService.presentSuccessToast("Employee saved.")}onEmployeeNameInput(t){let e=t.target;e!=null&&e.value&&(this.editedEmployee.name=e.value.toUpperCase())}};i.\u0275fac=function(e){return new(e||i)(y(q),y(M),y(b),y(F),y(N))},i.\u0275cmp=h({type:i,selectors:[["app-employee-edit-modal"]],inputs:{employeeID:"employeeID"},decls:27,vars:9,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Employee Name:",3,"ionInput","ngModelChange","value","ngModel"],["placeholder","Select a Department",3,"ionChange","ngModelChange","ngModel"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select a Role",3,"ngModelChange","ngModel"],["type","number","label","Salary:",3,"ngModelChange","value","ngModel"],[3,"value"]],template:function(e,o){e&1&&(l(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),u("click",function(){return o.cancel()}),m(4,"Cancel"),r()(),l(5,"ion-title"),m(6,"Edit Employee"),r(),l(7,"ion-buttons",2)(8,"ion-button",3),u("click",function(){return o.confirm()}),m(9,"Confirm"),r()()()(),l(10,"ion-content",4)(11,"ion-list")(12,"ion-item")(13,"ion-input",5),u("ionInput",function(a){return o.onEmployeeNameInput(a)}),R("ngModelChange",function(a){return w(o.editedEmployee.name,a)||(o.editedEmployee.name=a),a}),r()(),l(14,"ion-item")(15,"ion-select",6),u("ionChange",function(a){return o.changeFilteredRoles(a)}),R("ngModelChange",function(a){return w(o.editedEmployee.departmentID,a)||(o.editedEmployee.departmentID=a),a}),m(16," > "),l(17,"div",7),m(18,"Department"),r(),_(19,ke,2,2,"ion-select-option",8),r()(),l(20,"ion-item")(21,"ion-select",9),R("ngModelChange",function(a){return w(o.editedEmployee.roleID,a)||(o.editedEmployee.roleID=a),a}),l(22,"div",7),m(23,"Role"),r(),_(24,Le,2,2,"ion-select-option",8),r()(),l(25,"ion-item")(26,"ion-input",10),R("ngModelChange",function(a){return w(o.editedEmployee.salary,a)||(o.editedEmployee.salary=a),a}),r()()()()),e&2&&(p(8),c("strong",!0),p(5),K("value",o.editedEmployee.name),T("ngModel",o.editedEmployee.name),p(2),T("ngModel",o.editedEmployee.departmentID),p(4),c("ngForOf",o.departments),p(2),T("ngModel",o.editedEmployee.roleID),p(3),c("ngForOf",o.filteredRoles),p(2),K("value",o.editedEmployee.salary),T("ngModel",o.editedEmployee.salary))},dependencies:[C,I,S,k,ne,D,pe,V,ce,G,A,ue,fe,H,U,P],encapsulation:2});let n=i;return n})();function We(n,i){if(n&1){let s=$();l(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col",8),m(4),E(5,"br"),m(6),r(),l(7,"ion-col",9),m(8),r(),l(9,"ion-col",9),m(10),r(),l(11,"ion-col",6)(12,"ion-button",10),u("click",function(){let e=Y(s).$implicit,o=v(2);return Z(o.presentEmployeeActionSheet(e))}),E(13,"ion-icon",11),r()()()()()}if(n&2){let s=i.$implicit,t=v(2);p(4),f(" ",s.name," "),p(2),f(" Salary: $",s.salary," "),p(2),f(" ",t.getDepartmentName(s.departmentID)," "),p(2),f(" ",t.getRoleName(s.roleID)," ")}}function Be(n,i){if(n&1&&(l(0,"ion-list")(1,"ion-item")(2,"ion-grid")(3,"ion-row")(4,"ion-col",4),m(5,"Employee"),r(),l(6,"ion-col",5),m(7,"Dpt."),r(),l(8,"ion-col",5),m(9,"Role"),r(),E(10,"ion-col",6),r()()(),_(11,We,14,4,"ion-item",7),r()),n&2){let s=v();p(11),c("ngForOf",s.employees)}}function ze(n,i){n&1&&m(0," No Employees ")}var be=(()=>{let i=class i{constructor(t,e,o,d,a,xe){this._employeeService=t,this._departmentService=e,this._roleService=o,this.actionSheetCtrl=d,this.modalCtrl=a,this._toastService=xe,this.employees=[],he({ellipsisVerticalSharp:ge})}ngOnInit(){this.loadEmployees()}loadEmployees(){this.employees=this._employeeService.getEmployees()}getDepartmentName(t){var e;return(e=this._departmentService.getDepartment(t))==null?void 0:e.departmentName}getRoleName(t){var e;return(e=this._roleService.getRole(t))==null?void 0:e.roleName}presentEmployeeActionSheet(t){return J(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:t.name,buttons:[{text:"Edit",handler:()=>this.openEmployeeEditModal(t.employeeID)},{text:"Delete",role:"destructive",handler:()=>this.onDelete(t.employeeID)},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}openEmployeeEditModal(t){return J(this,null,function*(){let e=yield this.modalCtrl.create({component:Ne,componentProps:{employeeID:t}});e.present();let{data:o,role:d}=yield e.onWillDismiss();d==="confirm"&&(this.loadEmployees(),console.log(o,d))})}onDelete(t){confirm("Are you sure you want to delete this employee?")&&(this._employeeService.deleteEmployee(t),this.loadEmployees(),this._toastService.presentSuccessToast("Employee deleted."))}};i.\u0275fac=function(e){return new(e||i)(y(M),y(b),y(F),y(_e),y(q),y(N))},i.\u0275cmp=h({type:i,selectors:[["app-employee-list"]],decls:8,vars:2,consts:[["noEmployeesBlock",""],[1,"ion-card"],[1,"ion-text-center"],[4,"ngIf","ngIfElse"],["size","5"],["size","3"],["size","1"],[4,"ngFor","ngForOf"],["size","5",1,"ion-align-self-center"],["size","3",1,"ion-align-self-center"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","ellipsis-vertical-sharp"]],template:function(e,o){if(e&1&&(l(0,"ion-card",1)(1,"ion-card-header",2)(2,"ion-card-title"),m(3," Employee List "),r()(),l(4,"ion-card-content"),_(5,Be,12,1,"ion-list",3)(6,ze,1,0,"ng-template",null,0,te),r()()),e&2){let d=ee(7);p(5),c("ngIf",o.employees.length>0)("ngIfElse",d)}},dependencies:[C,I,j,S,L,B,z,W,G,A,D,Ee,de,ye,se],styles:["ion-col[_ngcontent-%COMP%]{font-size:10px}"]});let n=i;return n})();var at=(()=>{let i=class i{constructor(){}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=h({type:i,selectors:[["app-employees"]],decls:4,vars:1,consts:[[3,"title"],[1,"ion-padding"]],template:function(e,o){e&1&&(E(0,"app-sidemenu",0),l(1,"ion-content",1),E(2,"app-employee-create")(3,"app-employee-list"),r()),e&2&&c("title","Employees")},dependencies:[ve,V,Fe,be],encapsulation:2});let n=i;return n})();export{at as EmployeesComponent};
