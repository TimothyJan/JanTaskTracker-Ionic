import{a as xe}from"./chunk-CQT7YVAY.js";import{a as Me}from"./chunk-FRM2HGHV.js";import{a as N}from"./chunk-PKOGN4VO.js";import{a as He}from"./chunk-GJZEQUDA.js";import{a as Ee,c as we}from"./chunk-K4MEQIZ7.js";import{$ as Ae,A as M,B as W,C as me,Ca as ae,D as de,Da as ve,E as ue,F as Ne,Fa as Te,Ga as H,H as oe,Ha as Y,I as ne,Ia as E,J as z,K as B,Ka as ye,L as G,M as he,Ma as Ge,N as j,Na as ke,Oa as Ue,Pa as Pe,Qa as qe,V as _,W as fe,X as Le,Y as je,Z as k,_ as _e,a as te,aa as Re,b as Be,c as pe,ca as S,da as ge,e as Ve,f as D,g as I,ga as $e,h as F,i as l,j as h,ja as P,k as f,ka as U,l as C,la as Ce,m as s,ma as De,na as Ie,oa as Se,pa as ie,q as r,qa as V,r as a,ra as ze,s as O,sa as re,t as x,ta as q,u as m,ua as v,v as g,wa as T,x as $,xa as We,y as u}from"./chunk-BR66K6D3.js";import"./chunk-IPXLKNFD.js";import"./chunk-7KGURMOZ.js";import"./chunk-ZYUIEBGB.js";import"./chunk-5Z6BILBO.js";import"./chunk-ETSLECS3.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-C3VUKG7J.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as ee,f as R}from"./chunk-RW4GY4BD.js";var b=class{constructor(n,d,e,t,o,p){this.projectID=n,this.projectName=d,this.description=e,this.status=t,this.startDate=o,this.dueDate=p}};var y=class{constructor(n,d,e,t,o,p,c,A){this.projectTaskID=n,this.projectID=d,this.title=e,this.description=t,this.status=o,this.startDate=p,this.dueDate=c,this.assignedEmployeeIDs=A}};var L=(()=>{let n=class n{constructor(){this.projectTasksChangedSource=new te,this.projectTasksChanged$=this.projectTasksChangedSource.asObservable(),this.projectTaskID=5,this.projectTasks=[new y(1,1,"Task 1","Task for Project Alpha","Completed",new Date("2024-11-13"),new Date("2024-12-13"),[0,1]),new y(2,1,"Task 2","Another Task for Project Alpha","Active",new Date("2024-12-13"),new Date("2025-1-13"),[3]),new y(3,2,"Task 3","Task for Project Beta","Completed",new Date("2025-1-13"),new Date("2025-2-13"),[1]),new y(4,2,"Task 4","Another Task for Project Beta","Active",new Date("2024-11-13"),new Date("2025-2-13"),[1])]}getProjectTasks(){return this.projectTasks}getListOfProjectTaskIDsByProjectIDs(e){let t=[];for(var o of this.projectTasks)o.projectID===e&&t.push(o.projectTaskID);return t}getTasksByProjectID(e){return this.projectTasks.filter(t=>t.projectID===e)}getProjectTaskByID(e){return this.projectTasks.find(t=>t.projectTaskID===e)}createProjectTask(e){e.projectTaskID=this.projectTaskID++,this.projectTasks.push(e),this.projectTasksChangedSource.next()}updateProjectTask(e){let t=this.projectTasks.findIndex(o=>o.projectTaskID===e.projectTaskID);t!==-1&&(this.projectTasks[t]=e,this.projectTasksChangedSource.next())}deleteProjectTask(e){let t=this.projectTasks.findIndex(o=>o.projectTaskID===e);t!==-1&&(this.projectTasks.splice(t,1),this.projectTasksChangedSource.next())}notifyProjectTasksChanged(){this.projectTasksChangedSource.next()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();function it(i,n){if(i&1&&(r(0,"ion-item")(1,"ion-text"),u(2),a()()),i&2){let d=n.$implicit,e=g(2);l(2),W(" ",e.getEmployeeNameByEmployeeID(d)," - ",e.getRoleNameByEmployeeID(d)," ")}}function rt(i,n){if(i&1&&(r(0,"div")(1,"ion-list")(2,"ion-list-header"),u(3," Assigned Employees: "),a(),C(4,it,3,2,"ion-item",2),a()()),i&2){let d=g();l(4),s("ngForOf",d.projectTask.assignedEmployeeIDs)}}function at(i,n){i&1&&u(0,` No assigned employees
`)}var Ye=(()=>{let n=class n{constructor(e,t,o){this._projectTaskService=e,this._employeeService=t,this._roleService=o,this.projectTaskID=0,this.projectTask=new y(0,0,"","","Not Started"),this.destroy$=new te}ngOnInit(){this.getProjectTaskByID(),this._projectTaskService.projectTasksChanged$.pipe(Be(this.destroy$)).subscribe(()=>{this.getProjectTaskByID()})}getProjectTaskByID(){this.projectTask=this._projectTaskService.getProjectTaskByID(this.projectTaskID)}getEmployeeNameByEmployeeID(e){let t=this._employeeService.getEmployee(e);return t?t.name:"Unassigned"}getRoleNameByEmployeeID(e){let t=this._employeeService.getEmployee(e);if(t){let o=t.roleID;return o!=-1?this._roleService.getRole(o).roleName:"Unable to get role"}return"Unable to get employee"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};n.\u0275fac=function(t){return new(t||n)(h(L),h(xe),h(Me))},n.\u0275cmp=f({type:n,selectors:[["app-assigned-employee-list"]],inputs:{projectTaskID:"projectTaskID"},decls:3,vars:2,consts:[["noAssignedEmployees",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"]],template:function(t,o){if(t&1&&C(0,rt,5,1,"div",1)(1,at,1,0,"ng-template",null,0,z),t&2){let p=$(2);s("ngIf",o.projectTask.assignedEmployeeIDs)("ngIfElse",p)}},dependencies:[j,B,G,T,We,v,Te],styles:["ion-text[_ngcontent-%COMP%]{font-size:x-small}ion-list[_ngcontent-%COMP%]{--min-height: 16px}ion-list-header[_ngcontent-%COMP%]{padding:0;min-height:12px;font-size:small}ion-item[_ngcontent-%COMP%]{--min-height: 16px}"]});let i=n;return i})();function st(i,n){if(i&1&&(r(0,"ion-select-option",3),u(1),a()),i&2){let d=n.$implicit;s("value",d),l(),M(" ",d," ")}}var J=(()=>{let n=class n{constructor(){this.status="",this.statusSelectedEvent=new F,this.statuses=["Not Started","Active","Completed"]}onStatusChange(e){this.status=e.detail.value,this.statusSelectedEvent.emit(this.status)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["app-status-selector"]],inputs:{status:"status"},outputs:{statusSelectedEvent:"statusSelectedEvent"},decls:4,vars:2,consts:[["placeholder","Status: ",3,"ionChange","value"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){t&1&&(r(0,"ion-select",0),m("ionChange",function(c){return o.onStatusChange(c)}),r(1,"div",1),u(2,"Status: "),a(),C(3,st,2,2,"ion-select-option",2),a()),t&2&&(s("value",o.status),l(3),s("ngForOf",o.statuses))},dependencies:[j,B,Pe,ve],encapsulation:2});let i=n;return i})();var K=(()=>{let n=class n{constructor(){this.value="",this.label="text",this.placeholder="",this.valueChanged=new F}ngOnInit(){this.placeholder=`Enter ${this.label} here`}onInputChange(e){this.value=e.target.value,this.valueChanged.emit(this.value)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["app-input"]],inputs:{value:"value",label:"label"},outputs:{valueChanged:"valueChanged"},decls:1,vars:3,consts:[[3,"ionInput","value","label","placeholder"]],template:function(t,o){t&1&&(r(0,"ion-input",0),m("ionInput",function(c){return o.onInputChange(c)}),a()),t&2&&s("value",o.value)("label",o.label+":")("placeholder",o.placeholder)},dependencies:[j,S,Ue],encapsulation:2});let i=n;return i})();var Q=(()=>{let n=class n{constructor(){this.text="",this.label="",this.placeholder="",this.rows=3,this.textChanged=new F}ngOnInit(){this.placeholder=`Enter ${this.label} here`}onTextChange(e){this.text=e.target.value,this.textChanged.emit(this.text)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["app-text-area"]],inputs:{text:"text",label:"label",rows:"rows"},outputs:{textChanged:"textChanged"},decls:2,vars:5,consts:[[1,"text-area-container"],[1,"full-width",3,"ionInput","value","label","placeholder","rows","autoGrow"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"ion-textarea",1),m("ionInput",function(c){return o.onTextChange(c)}),a()()),t&2&&(l(),s("value",o.text)("label",o.label+":")("placeholder",o.placeholder)("rows",o.rows)("autoGrow",!0))},dependencies:[j,S,qe],encapsulation:2});let i=n;return i})();function lt(i,n){if(i&1){let d=x();r(0,"ion-datetime",5),ue("ngModelChange",function(t){D(d);let o=g();return de(o.selectedDate,t)||(o.selectedDate=t),I(t)}),m("ionChange",function(t){D(d);let o=g();return I(o.onDateChange(t))}),a()}if(i&2){let d=g();s("id",d.datetimeId)("showDefaultTitle",!0)("showDefaultButtons",!0),me("ngModel",d.selectedDate)}}var X=(()=>{let n=class n{constructor(){this.label="",this.date=new Date,this.dateSelected=new F,this.selectedDate=new Date().toISOString(),this.datetimeId=`datetime-${Math.random().toString(36).substring(2,9)}`}ngOnInit(){this.date&&(this.selectedDate=this.date.toISOString()),this.dateSelected.emit(this.selectedDate)}onDateChange(e){this.selectedDate=e.detail.value,this.dateSelected.emit(this.selectedDate)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f({type:n,selectors:[["app-date-selector"]],inputs:{label:"label",date:"date"},outputs:{dateSelected:"dateSelected"},decls:8,vars:4,consts:[[3,"fixed"],["size","auto",1,"ion-align-self-center"],["size","auto"],[3,"datetime"],[3,"keepContentsMounted"],["presentation","date","doneText","SELECT","cancelText","CANCEL",3,"ngModelChange","ionChange","id","showDefaultTitle","showDefaultButtons","ngModel"]],template:function(t,o){t&1&&(r(0,"ion-grid",0)(1,"ion-row")(2,"ion-col",1),u(3),a(),r(4,"ion-col",2),O(5,"ion-datetime-button",3),r(6,"ion-modal",4),C(7,lt,1,4,"ng-template"),a()()()()),t&2&&(s("fixed",!0),l(3),M(" ",o.label,": "),l(2),s("datetime",o.datetimeId),l(),s("keepContentsMounted",!0))},dependencies:[S,fe,_e,ge,re,ae,ie,Ge,ze,$e],encapsulation:2});let i=n;return i})();function ct(i,n){if(i&1&&(r(0,"ion-select-option",3),u(1),a()),i&2){let d=n.$implicit,e=g();s("value",d),l(),W(" ",d.name," - ",e.getRoleName(d.roleID)," ")}}var be=(()=>{let n=class n{constructor(e,t){this._employeeService=e,this._roleService=t,this.employees=[],this.assignedEmployeeIDs=[],this.employeesSelectedEvent=new F,this.selectedEmployees=[]}ngOnInit(){this.getEmployees(),this.selectedEmployees=this.employees.filter(e=>this.assignedEmployeeIDs.includes(e.employeeID))}ngOnChanges(e){e.assignedEmployeeIDs&&this.employees.length&&(this.selectedEmployees=this.employees.filter(t=>this.assignedEmployeeIDs.includes(t.employeeID)))}getEmployees(){this.employees=this._employeeService.getEmployees()}getRoleName(e){let t=this._roleService.getRole(e);return t?t.roleName:"Unable to get role"}onEmployeeChange(e){this.selectedEmployees=e.detail.value;let t=this.selectedEmployees.map(o=>o.employeeID);this.employeesSelectedEvent.emit(t)}compareEmployees(e,t){return e&&t?e.employeeID===t.employeeID:e===t}};n.\u0275fac=function(t){return new(t||n)(h(xe),h(Me))},n.\u0275cmp=f({type:n,selectors:[["app-assign-employees"]],inputs:{assignedEmployeeIDs:"assignedEmployeeIDs"},outputs:{employeesSelectedEvent:"employeesSelectedEvent"},features:[Ve],decls:4,vars:4,consts:[["placeholder","Select Employees",3,"ngModelChange","ionChange","multiple","ngModel","compareWith"],["slot","label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){t&1&&(r(0,"ion-select",0),ue("ngModelChange",function(c){return de(o.selectedEmployees,c)||(o.selectedEmployees=c),c}),m("ionChange",function(c){return o.onEmployeeChange(c)}),r(1,"div",1),u(2,"Employees: "),a(),C(3,ct,2,3,"ion-select-option",2),a()),t&2&&(s("multiple",!0),me("ngModel",o.selectedEmployees),s("compareWith",o.compareEmployees),l(3),s("ngForOf",o.employees))},dependencies:[j,B,S,fe,_e,Pe,ve],encapsulation:2});let i=n;return i})();var pt=()=>[];function mt(i,n){if(i&1){let d=x();r(0,"app-date-selector",11),m("dateSelected",function(t){D(d);let o=g();return I(o.handleStartDateSelection(t))}),a()}if(i&2){let d=g();s("label","Start Date")("date",d.editedProjectTask.startDate)}}function dt(i,n){if(i&1){let d=x();r(0,"app-date-selector",12),m("dateSelected",function(t){D(d);let o=g();return I(o.handleStartDateSelection(t))}),a()}i&2&&s("label","Start Date")}function ut(i,n){if(i&1){let d=x();r(0,"app-date-selector",11),m("dateSelected",function(t){D(d);let o=g();return I(o.handleDueDateSelection(t))}),a()}if(i&2){let d=g();s("label","Due Date")("date",d.editedProjectTask.dueDate)}}function ht(i,n){if(i&1){let d=x();r(0,"app-date-selector",12),m("dateSelected",function(t){D(d);let o=g();return I(o.handleDueDateSelection(t))}),a()}i&2&&s("label","Due Date")}var Ke=(()=>{let n=class n{constructor(e,t,o){this.modalCtrl=e,this._projectTaskService=t,this._toastService=o,this.projectTaskID=-1,this.originalProjectTask=new y(-1,0,"","","Not Started",new Date,new Date,[]),this.editedProjectTask=new y(-1,0,"","","Not Started",new Date,new Date,[]),this.statuses=["Not Started","Active","Completed"],this.startDateString="",this.dueDateString="",this.assignedEmployees=[]}ngOnInit(){this.getProjectTask()}getProjectTask(){let e=this._projectTaskService.getProjectTaskByID(this.projectTaskID);e?(this.originalProjectTask=ee({},e),this.editedProjectTask=ee({},e)):this._toastService.presentErrorToast("Unable to retrieve project task.")}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.saveChanges(),this.modalCtrl.dismiss(this.projectTaskID,"confirm")}handleTitleChange(e){this.editedProjectTask.title=e}handleStatusChange(e){this.editedProjectTask.status=e}handleDescriptionChange(e){this.editedProjectTask.description=e}handleStartDateSelection(e){let t=new Date(e);this.editedProjectTask.startDate=t}handleDueDateSelection(e){let t=new Date(e);this.editedProjectTask.dueDate=t}handleEmployeeSelection(e){this.editedProjectTask.assignedEmployeeIDs=e}saveChanges(){this._projectTaskService.updateProjectTask(this.editedProjectTask),this._projectTaskService.notifyProjectTasksChanged(),this._toastService.presentSuccessToast("Project task updated.")}};n.\u0275fac=function(t){return new(t||n)(h(E),h(L),h(N))},n.\u0275cmp=f({type:n,selectors:[["app-project-task-edit-modal"]],inputs:{projectTaskID:"projectTaskID"},decls:28,vars:12,consts:[["startDateSelector",""],["dueDateSelector",""],["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[3,"valueChanged","label","value"],[3,"textChanged","label","text"],[3,"statusSelectedEvent","status"],[3,"label","date","dateSelected",4,"ngIf","ngIfElse"],[3,"employeesSelectedEvent","assignedEmployeeIDs"],[3,"dateSelected","label","date"],[3,"dateSelected","label"]],template:function(t,o){if(t&1){let p=x();r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-button",3),m("click",function(){return D(p),I(o.cancel())}),u(4,"Cancel"),a()(),r(5,"ion-title"),u(6,"Edit Project Task"),a(),r(7,"ion-buttons",4)(8,"ion-button",5),m("click",function(){return D(p),I(o.confirm())}),u(9,"Confirm"),a()()()(),r(10,"ion-content")(11,"ion-list")(12,"ion-item")(13,"app-input",6),m("valueChanged",function(A){return D(p),I(o.handleTitleChange(A))}),a()(),r(14,"ion-item")(15,"app-text-area",7),m("textChanged",function(A){return D(p),I(o.handleDescriptionChange(A))}),a()(),r(16,"ion-item")(17,"app-status-selector",8),m("statusSelectedEvent",function(A){return D(p),I(o.handleStatusChange(A))}),a()(),r(18,"ion-item"),C(19,mt,1,2,"app-date-selector",9)(20,dt,1,1,"ng-template",null,0,z),a(),r(22,"ion-item"),C(23,ut,1,2,"app-date-selector",9)(24,ht,1,1,"ng-template",null,1,z),a(),r(26,"ion-item")(27,"app-assign-employees",10),m("employeesSelectedEvent",function(A){return D(p),I(o.handleEmployeeSelection(A))}),a()()()()}if(t&2){let p=$(21),c=$(25);l(8),s("strong",!0),l(5),s("label","Task")("value",o.editedProjectTask.title),l(2),s("label","Description")("text",o.editedProjectTask.description),l(2),s("status",o.editedProjectTask.status),l(2),s("ngIf",o.editedProjectTask.startDate)("ngIfElse",p),l(4),s("ngIf",o.editedProjectTask.dueDate)("ngIfElse",c),l(4),s("assignedEmployeeIDs",o.editedProjectTask.assignedEmployeeIDs||Ne(11,pt))}},dependencies:[j,G,S,P,U,H,V,q,Y,T,v,J,K,Q,X,be],encapsulation:2});let i=n;return i})();var Qe=(()=>{let n=class n{constructor(e,t,o){this._projectTaskService=e,this.actionSheetCtrl=t,this.modalCtrl=o,this.projectTaskID=0,this.projectTask=new y(0,0,"","","Not Started"),this.titleInvalid=!1,this.descriptionInvalid=!1,this.startDateString="",this.dueDateString="",Ee({ellipsisVerticalSharp:we})}ngOnInit(){this.getProjectTaskByID(),this.syncDateStrings()}getProjectTaskByID(){this.projectTask=this._projectTaskService.getProjectTaskByID(this.projectTaskID),this.syncDateStrings()}syncDateStrings(){this.startDateString=this.formatDate(this.projectTask.startDate),this.dueDateString=this.formatDate(this.projectTask.dueDate)}formatDate(e){if(!e)return"";let t=new Date(e),o=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0");return`${o}-${p}-${c}`}presentProjectTaskActionSheet(){return R(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:this.projectTask.title,buttons:[{text:"Edit",handler:()=>this.openProjectTaskEditModal()},{text:"Delete",role:"destructive",handler:()=>this.onDelete()},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}openProjectTaskEditModal(){return R(this,null,function*(){let e=yield this.modalCtrl.create({component:Ke,componentProps:{projectTaskID:this.projectTaskID}});e.present();let{data:t,role:o}=yield e.onWillDismiss();o==="confirm"&&this.getProjectTaskByID()})}onDelete(){confirm("Are you sure you want to delete this projectTask?")&&this._projectTaskService.deleteProjectTask(this.projectTaskID)}};n.\u0275fac=function(t){return new(t||n)(h(L),h(ye),h(E))},n.\u0275cmp=f({type:n,selectors:[["app-project-task"]],inputs:{projectTaskID:"projectTaskID"},decls:28,vars:14,consts:[["color","light",1,"ion-card"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["size","5",1,"ion-align-self-center","ion-text-end","status"],["size","1",1,"ion-text-end"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","ellipsis-vertical-sharp"],["size","6",1,"ion-align-self-center","ion-text-nowrap"],[1,"date"],[3,"projectTaskID"]],template:function(t,o){t&1&&(r(0,"ion-card",0)(1,"ion-card-header")(2,"ion-grid")(3,"ion-row")(4,"ion-grid",1)(5,"ion-row",2)(6,"ion-col",3),u(7),a(),r(8,"ion-col",4)(9,"ion-button",5),m("click",function(){return o.presentProjectTaskActionSheet()}),O(10,"ion-icon",6),a()()()()(),r(11,"ion-row")(12,"ion-col",7)(13,"ion-card-title"),u(14),a()()()()(),r(15,"ion-card-content")(16,"ion-list")(17,"ion-item")(18,"ion-grid")(19,"ion-row",8),u(20),oe(21,"date"),oe(22,"date"),a()()(),r(23,"ion-item")(24,"ion-text"),u(25),a()(),r(26,"ion-item"),O(27,"app-assigned-employee-list",9),a()()()()),t&2&&(l(7),M(" ",o.projectTask.status," "),l(7),M(" ",o.projectTask.title," "),l(6),W(" ",ne(21,6,o.projectTask.startDate,"shortDate","UTC")," - ",ne(22,10,o.projectTask.dueDate,"shortDate","UTC")," "),l(5),M(" ",o.projectTask.description," "),l(2),s("projectTaskID",o.projectTaskID))},dependencies:[j,he,Ce,Ie,Se,P,ke,re,ae,ie,De,T,v,Te,Ye],styles:["ion-card[_ngcontent-%COMP%]{margin:0;padding:0}ion-grid[_ngcontent-%COMP%]{margin:0;padding:0}ion-card-header[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}ion-text[_ngcontent-%COMP%]{font-size:small}.status[_ngcontent-%COMP%]{font-size:x-small}ion-card-header[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;font-size:medium}ion-col[_ngcontent-%COMP%]{top:50%}ion-item[_ngcontent-%COMP%]{--min-height: 16px}.date[_ngcontent-%COMP%]{font-size:10px}"]});let i=n;return i})();var Z=(()=>{let n=class n{constructor(){this.projectsChangedSource=new te,this.projectsChanged$=this.projectsChangedSource.asObservable(),this.projectID=3,this.projects=[new b(1,"Project Alpha","First project","Active",new Date("2024-11-13"),new Date("2025-11-13")),new b(2,"Project Beta","Second project","Active",new Date("2024-11-13"),new Date("2025-1-13"))]}getProjects(){return this.projects}getListOfProjectIDs(){let e=[];return this.projects.forEach(t=>{e.push(t.projectID)}),e}getProjectByID(e){return this.projects.find(t=>t.projectID===e)}createProject(e){e.projectID=this.projectID++,this.projects.push(e),this.projectsChangedSource.next()}updateProject(e){let t=this.projects.findIndex(o=>o.projectID===e.projectID);t!==-1&&(this.projects[t]=e,this.projectsChangedSource.next())}deleteProject(e){let t=this.projects.findIndex(o=>o.projectID===e);t!==-1&&(this.projects.splice(t,1),this.projectsChangedSource.next())}notifyProjectsChanged(){this.projectsChangedSource.next()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var Xe=(()=>{let n=class n{constructor(e,t,o){this.modalCtrl=e,this._projectService=t,this._toastService=o,this.projectID=-1,this.originalProject=new b(-1,"","","Not Started",new Date,new Date),this.editedProject=new b(-1,"","","Not Started",new Date,new Date)}ngOnInit(){this.getProject()}getProject(){let e=this._projectService.getProjectByID(this.projectID);e?(this.originalProject=ee({},e),this.editedProject=ee({},e)):this._toastService.presentErrorToast("Unable to retrieve project")}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.saveChanges(),this.modalCtrl.dismiss(this.projectID,"confirm")}handleProjectNameChange(e){this.editedProject.projectName=e}handleStatusChange(e){this.editedProject.status=e}handleDescriptionChange(e){this.editedProject.description=e}handleStartDateSelection(e){let t=new Date(e);this.editedProject.startDate=t}handleDueDateSelection(e){let t=new Date(e);this.editedProject.dueDate=t}saveChanges(){this._projectService.updateProject(this.editedProject),this._projectService.notifyProjectsChanged(),this._toastService.presentSuccessToast("Project saved.")}};n.\u0275fac=function(t){return new(t||n)(h(E),h(Z),h(N))},n.\u0275cmp=f({type:n,selectors:[["app-project-edit-modal"]],inputs:{projectID:"projectID"},decls:22,vars:10,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[3,"valueChanged","label","value"],[3,"statusSelectedEvent","status"],[3,"textChanged","label","text"],[3,"dateSelected","label","date"]],template:function(t,o){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),m("click",function(){return o.cancel()}),u(4,"Cancel"),a()(),r(5,"ion-title"),u(6,"Edit Project"),a(),r(7,"ion-buttons",2)(8,"ion-button",3),m("click",function(){return o.confirm()}),u(9,"Confirm"),a()()()(),r(10,"ion-content")(11,"ion-list")(12,"ion-item")(13,"app-input",4),m("valueChanged",function(c){return o.handleProjectNameChange(c)}),a()(),r(14,"ion-item")(15,"app-status-selector",5),m("statusSelectedEvent",function(c){return o.handleStatusChange(c)}),a()(),r(16,"ion-item")(17,"app-text-area",6),m("textChanged",function(c){return o.handleDescriptionChange(c)}),a()(),r(18,"ion-item")(19,"app-date-selector",7),m("dateSelected",function(c){return o.handleStartDateSelection(c)}),a()(),r(20,"ion-item")(21,"app-date-selector",7),m("dateSelected",function(c){return o.handleDueDateSelection(c)}),a()()()()),t&2&&(l(8),s("strong",!0),l(5),s("label","Project")("value",o.editedProject.projectName),l(2),s("status",o.editedProject.status),l(2),s("label","Description")("text",o.editedProject.description),l(2),s("label","Start Date")("date",o.editedProject.startDate),l(2),s("label","Due Date")("date",o.editedProject.dueDate))},dependencies:[j,S,q,Y,U,P,H,V,T,v,K,J,Q,X],encapsulation:2});let i=n;return i})();var Ze=(()=>{let n=class n{constructor(e,t,o){this.modalCtrl=e,this._projectTaskService=t,this._toastService=o,this.projectID=-1,this.projectTaskForm=new je({projectID:new k(0,[_.required,_.minLength(2),_.maxLength(50)]),title:new k("",[_.required,_.minLength(2),_.maxLength(50)]),description:new k("",[_.required,_.minLength(2),_.maxLength(50)]),status:new k("",[_.required,_.minLength(2),_.maxLength(50)]),startDate:new k(""),dueDate:new k(""),assignedEmployeeIDs:new k([])})}ngOnInit(){this.assignProjectID()}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.projectTaskForm.valid?(this.createProjectTask(),this.modalCtrl.dismiss("confirm")):this.modalCtrl.dismiss("confirm")}assignProjectID(){this.projectTaskForm.controls.projectID.setValue(this.projectID)}handleTitleChange(e){this.projectTaskForm.controls.title.setValue(e)}handleDescriptionChange(e){this.projectTaskForm.controls.description.setValue(e)}handleStatusChange(e){this.projectTaskForm.controls.status.setValue(e)}handleStartDateSelection(e){let t=new Date(e);this.projectTaskForm.controls.startDate.setValue(t)}handleDueDateSelection(e){let t=new Date(e);this.projectTaskForm.controls.dueDate.setValue(t)}handleEmployeeSelection(e){this.projectTaskForm.controls.assignedEmployeeIDs.setValue(e)}createProjectTask(){let e=new y(0,this.projectTaskForm.controls.projectID.value,this.projectTaskForm.controls.title.value,this.projectTaskForm.controls.description.value,this.projectTaskForm.controls.status.value,this.projectTaskForm.controls.startDate.value,this.projectTaskForm.controls.dueDate.value,this.projectTaskForm.controls.assignedEmployeeIDs.value);this._projectTaskService.createProjectTask(e),this._projectTaskService.notifyProjectTasksChanged(),this._toastService.presentSuccessToast("Project task created.")}};n.\u0275fac=function(t){return new(t||n)(h(E),h(L),h(N))},n.\u0275cmp=f({type:n,selectors:[["app-project-task-create-modal"]],inputs:{projectID:"projectID"},decls:24,vars:6,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[3,"valueChanged","label"],[3,"textChanged","label"],[3,"statusSelectedEvent"],[3,"dateSelected","label"],[3,"employeesSelectedEvent","assignedEmployeeIDs"]],template:function(t,o){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),m("click",function(){return o.cancel()}),u(4,"Cancel"),a()(),r(5,"ion-title"),u(6,"Edit Project Task"),a(),r(7,"ion-buttons",2)(8,"ion-button",3),m("click",function(){return o.confirm()}),u(9,"Confirm"),a()()()(),r(10,"ion-content")(11,"ion-list")(12,"ion-item")(13,"app-input",4),m("valueChanged",function(c){return o.handleTitleChange(c)}),a()(),r(14,"ion-item")(15,"app-text-area",5),m("textChanged",function(c){return o.handleDescriptionChange(c)}),a()(),r(16,"ion-item")(17,"app-status-selector",6),m("statusSelectedEvent",function(c){return o.handleStatusChange(c)}),a()(),r(18,"ion-item")(19,"app-date-selector",7),m("dateSelected",function(c){return o.handleStartDateSelection(c)}),a()(),r(20,"ion-item")(21,"app-date-selector",7),m("dateSelected",function(c){return o.handleDueDateSelection(c)}),a()(),r(22,"ion-item")(23,"app-assign-employees",8),m("employeesSelectedEvent",function(c){return o.handleEmployeeSelection(c)}),a()()()()),t&2&&(l(8),s("strong",!0),l(5),s("label","Task"),l(2),s("label","Description"),l(4),s("label","Start Date"),l(2),s("label","Due Date"),l(2),s("assignedEmployeeIDs",o.projectTaskForm.value.assignedEmployeeIDs))},dependencies:[j,S,q,Y,U,P,H,V,T,v,K,Q,J,X,be],encapsulation:2});let i=n;return i})();function ft(i,n){if(i&1&&(r(0,"ion-row",10),u(1),oe(2,"date"),oe(3,"date"),a()),i&2){let d=g();l(),W(" ",ne(2,2,d.project.startDate,"shortDate","UTC")," - ",ne(3,6,d.project.dueDate,"shortDate","UTC")," ")}}function jt(i,n){if(i&1&&(r(0,"ion-list",12)(1,"ion-item"),O(2,"app-project-task",13),a()()),i&2){let d=n.$implicit;l(2),s("projectTaskID",d)}}function _t(i,n){if(i&1&&(r(0,"div"),C(1,jt,3,1,"ion-list",11),a()),i&2){let d=g();l(),s("ngForOf",d.listOfProjectTaskIDs)}}function gt(i,n){i&1&&u(0," No Project Tasks ")}var et=(()=>{let n=class n{constructor(e,t,o,p,c){this._projectService=e,this._projectTaskService=t,this.actionSheetCtrl=o,this.modalCtrl=p,this._toastService=c,this.projectID=0,this.project=new b(0,"","","Not Started",new Date,new Date),this.listOfProjectTaskIDs=[],this.projectNameInvalid=!1,this.descriptionInvalid=!1,this.startDateString="",this.dueDateString="",Ee({ellipsisVerticalSharp:we})}ngOnInit(){this.getProjectByID(),this.getListOfProjectTaskIDsByProjectID(),this._projectService.projectsChanged$.subscribe(()=>{this.getProjectByID()}),this._projectTaskService.projectTasksChanged$.subscribe(()=>{this.getListOfProjectTaskIDsByProjectID()})}getProjectByID(){this.project=this._projectService.getProjectByID(this.projectID)}getListOfProjectTaskIDsByProjectID(){this.listOfProjectTaskIDs=this._projectTaskService.getListOfProjectTaskIDsByProjectIDs(this.projectID)}presentProjectActionSheet(){return R(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:this.project.projectName,buttons:[{text:"Edit Project",handler:()=>this.openProjectEditModal()},{text:"Add Project Task",handler:()=>this.openProjectTaskCreateModal()},{text:"Delete Project",role:"destructive",handler:()=>this.onDelete(this.project.projectID)},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}openProjectTaskCreateModal(){return R(this,null,function*(){let e=yield this.modalCtrl.create({component:Ze,componentProps:{projectID:this.projectID}});e.present();let{data:t,role:o}=yield e.onWillDismiss()})}openProjectEditModal(){return R(this,null,function*(){let e=yield this.modalCtrl.create({component:Xe,componentProps:{projectID:this.projectID}});e.present();let{data:t,role:o}=yield e.onWillDismiss()})}onDelete(e){confirm("Are you sure you want to delete this project?")&&(this._projectService.deleteProject(e),this._toastService.presentSuccessToast("Department deleted."))}};n.\u0275fac=function(t){return new(t||n)(h(Z),h(L),h(ye),h(E),h(N))},n.\u0275cmp=f({type:n,selectors:[["app-project"]],inputs:{projectID:"projectID"},decls:22,vars:6,consts:[["noProjectTasksBlock",""],["color","medium",1,"ion-card"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["size","5",1,"ion-align-self-center","ion-text-end"],["size","1",1,"ion-text-end"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","ellipsis-vertical-sharp"],["class","date",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"date"],["class","ion-text-center",4,"ngFor","ngForOf"],[1,"ion-text-center"],[3,"projectTaskID"]],template:function(t,o){if(t&1){let p=x();r(0,"ion-card",1)(1,"ion-card-header")(2,"ion-grid",2)(3,"ion-row")(4,"ion-grid")(5,"ion-row",3)(6,"ion-col",4),u(7),a(),r(8,"ion-col",5)(9,"ion-button",6),m("click",function(){return D(p),I(o.presentProjectActionSheet())}),O(10,"ion-icon",7),a()()()()(),r(11,"ion-row")(12,"ion-card-title"),u(13),a()(),C(14,ft,4,10,"ion-row",8),r(15,"ion-row")(16,"ion-col"),u(17),a()()()(),r(18,"ion-card-content"),C(19,_t,2,1,"div",9)(20,gt,1,0,"ng-template",null,0,z),a()()}if(t&2){let p=$(21);l(7),M(" ",o.project.status," "),l(6),M(" ",o.project.projectName," "),l(),s("ngIf",o.project.startDate&&o.project.dueDate),l(3),M(" ",o.project.description," "),l(2),s("ngIf",o.listOfProjectTaskIDs.length>0)("ngIfElse",p)}},dependencies:[j,B,G,he,Ce,Ie,Se,De,T,v,P,ke,re,ae,ie,Qe],styles:["ion-grid[_ngcontent-%COMP%]{margin:0;padding:0}ion-card-header[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.date[_ngcontent-%COMP%]{font-size:10px}app-project-task[_ngcontent-%COMP%]{display:block;width:100%}"]});let i=n;return i})();var tt=(()=>{let n=class n{constructor(e,t,o){this.modalCtrl=e,this._projectService=t,this._toastService=o,this.projectForm=new je({projectName:new k("",[_.required,_.minLength(2),_.maxLength(50)]),description:new k("",[_.required,_.minLength(2),_.maxLength(50)]),status:new k("",[_.required,_.minLength(2),_.maxLength(50)]),startDate:new k(""),dueDate:new k("")})}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.projectForm.valid?(this.createProject(),this.modalCtrl.dismiss("confirm")):this.modalCtrl.dismiss("confirm")}handleProjectNameChange(e){this.projectForm.controls.projectName.setValue(e)}handleStatusChange(e){this.projectForm.controls.status.setValue(e)}handleDescriptionChange(e){this.projectForm.controls.description.setValue(e)}handleStartDateSelection(e){let t=new Date(e);this.projectForm.controls.startDate.setValue(t)}handleDueDateSelection(e){let t=new Date(e);this.projectForm.controls.dueDate.setValue(t)}createProject(){let e=new b(0,this.projectForm.controls.projectName.value,this.projectForm.controls.description.value,this.projectForm.controls.status.value,this.projectForm.controls.startDate.value,this.projectForm.controls.dueDate.value);this._projectService.createProject(e),this._projectService.notifyProjectsChanged(),this._toastService.presentSuccessToast("Project created.")}};n.\u0275fac=function(t){return new(t||n)(h(E),h(Z),h(N))},n.\u0275cmp=f({type:n,selectors:[["app-project-create-modal"]],decls:23,vars:7,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong","disabled"],[3,"ngSubmit","formGroup"],[3,"valueChanged","label"],[3,"statusSelectedEvent"],[3,"textChanged","label"],[3,"dateSelected","label"]],template:function(t,o){t&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),m("click",function(){return o.cancel()}),u(4,"Cancel"),a()(),r(5,"ion-title"),u(6,"Create Project"),a(),r(7,"ion-buttons",2)(8,"ion-button",3),m("click",function(){return o.confirm()}),u(9,"Confirm"),a()()()(),r(10,"ion-content")(11,"form",4),m("ngSubmit",function(){return o.createProject()}),r(12,"ion-list")(13,"ion-item")(14,"app-input",5),m("valueChanged",function(c){return o.handleProjectNameChange(c)}),a()(),r(15,"ion-item")(16,"app-status-selector",6),m("statusSelectedEvent",function(c){return o.handleStatusChange(c)}),a()(),r(17,"ion-item")(18,"app-text-area",7),m("textChanged",function(c){return o.handleDescriptionChange(c)}),a()(),r(19,"ion-item")(20,"app-date-selector",8),m("dateSelected",function(c){return o.handleStartDateSelection(c)}),a()(),r(21,"ion-item")(22,"app-date-selector",8),m("dateSelected",function(c){return o.handleDueDateSelection(c)}),a()()()()()),t&2&&(l(8),s("strong",!0)("disabled",!o.projectForm.valid),l(3),s("formGroup",o.projectForm),l(3),s("label","Project"),l(4),s("label","Description"),l(2),s("label","Start Date"),l(2),s("label","Due Date"))},dependencies:[j,S,Ae,Le,ge,Re,q,Y,U,P,H,V,T,v,Q,K,J,X],encapsulation:2});let i=n;return i})();function Ct(i,n){if(i&1&&(r(0,"ion-list")(1,"ion-item"),O(2,"app-project",7),a()()),i&2){let d=n.$implicit;l(2),s("projectID",d)}}function Dt(i,n){if(i&1&&(r(0,"div"),C(1,Ct,3,1,"ion-list",6),a()),i&2){let d=g();l(),s("ngForOf",d.listOfProjectIDs)}}function It(i,n){i&1&&u(0," No Projects ")}var wn=(()=>{let n=class n{constructor(e,t){this._projectService=e,this.modalCtrl=t,this.listOfProjectIDs=[]}ngOnInit(){this.getListOfProjectIDs(),this._projectService.projectsChanged$.subscribe(()=>{this.getListOfProjectIDs()})}getListOfProjectIDs(){this.listOfProjectIDs=this._projectService.getListOfProjectIDs()}openProjectCreateModal(){return R(this,null,function*(){let e=yield this.modalCtrl.create({component:tt,componentProps:{}});e.present();let{data:t,role:o}=yield e.onWillDismiss()})}};n.\u0275fac=function(t){return new(t||n)(h(Z),h(E))},n.\u0275cmp=f({type:n,selectors:[["app-projects"]],decls:8,vars:3,consts:[["noProjectBlock",""],[3,"title"],[1,"ion-padding"],[1,"ion-text-center"],[3,"click"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"projectID"]],template:function(t,o){if(t&1){let p=x();O(0,"app-sidemenu",1),r(1,"ion-content",2)(2,"div",3)(3,"ion-button",4),m("click",function(){return D(p),I(o.openProjectCreateModal())}),u(4,"Create New Project"),a()(),C(5,Dt,2,1,"div",5)(6,It,1,0,"ng-template",null,0,z),a()}if(t&2){let p=$(7);s("title","Projects"),l(5),s("ngIf",o.listOfProjectIDs.length>0)("ngIfElse",p)}},dependencies:[j,B,G,He,V,P,T,v,et],styles:["app-project[_ngcontent-%COMP%]{display:block;width:100%}"]});let i=n;return i})();export{wn as ProjectsComponent};
