import{a as v}from"./chunk-5W6OI3HN.js";import{a as C}from"./chunk-PKOGN4VO.js";import{a as De}from"./chunk-GJZEQUDA.js";import{a as ue,c as fe}from"./chunk-K4MEQIZ7.js";import{$ as ee,A as R,C as P,Ca as pe,D as U,E as q,Ga as se,Ha as de,Ia as w,J,K,Ka as le,L as Q,N as D,Na as ce,Oa as k,V as S,W as N,X,Y,Z,_ as $,aa as te,ba as ne,ca as h,da as ie,f as G,g as O,i as d,j as m,ja as _,k as u,ka as oe,l as B,la as M,m as l,ma as y,na as E,oa as b,pa as re,q as r,qa as T,r as a,s as f,sa as ae,t as z,ta as me,u as c,ua as F,v as V,w as W,wa as x,x as H,y as p}from"./chunk-BR66K6D3.js";import"./chunk-IPXLKNFD.js";import"./chunk-7KGURMOZ.js";import"./chunk-ZYUIEBGB.js";import"./chunk-5Z6BILBO.js";import"./chunk-ETSLECS3.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-C3VUKG7J.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as L,f as j}from"./chunk-RW4GY4BD.js";var Ce=(()=>{let n=class n{constructor(t,e,i){this.modalCtrl=t,this._departmentService=e,this._toastService=i,this.departmentID=-1,this.originalDepartment={departmentID:-1,departmentName:""},this.editedDepartment={departmentID:-1,departmentName:""}}ngOnInit(){this.getDepartment()}getDepartment(){let t=this._departmentService.getDepartment(this.departmentID);if(!t){console.error("Department not found"),this.modalCtrl.dismiss(null,"error");return}this.originalDepartment=L({},t),this.editedDepartment=L({},t)}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){return this.saveChanges(),this.modalCtrl.dismiss(this.departmentID,"confirm")}saveChanges(){this._departmentService.updateDepartment(this.editedDepartment),this._departmentService.notifyDepartmentsChanged(),this._toastService.presentSuccessToast("Department saved.")}onDepartmentNameInput(t){let e=t.target;e!=null&&e.value&&(this.editedDepartment.departmentName=e.value.toUpperCase())}};n.\u0275fac=function(e){return new(e||n)(m(w),m(v),m(C))},n.\u0275cmp=u({type:n,selectors:[["app-department-edit-modal"]],inputs:{departmentID:"departmentID"},decls:14,vars:3,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"click","strong"],[1,"ion-padding"],["label","Department Name:",3,"ionInput","ngModelChange","value","ngModel"]],template:function(e,i){e&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),c("click",function(){return i.cancel()}),p(4,"Cancel"),a()(),r(5,"ion-title"),p(6,"Edit Department"),a(),r(7,"ion-buttons",2)(8,"ion-button",3),c("click",function(){return i.confirm()}),p(9,"Confirm"),a()()()(),r(10,"ion-content",4)(11,"ion-list")(12,"ion-item")(13,"ion-input",5),c("ionInput",function(g){return i.onDepartmentNameInput(g)}),q("ngModelChange",function(g){return U(i.editedDepartment.departmentName,g)||(i.editedDepartment.departmentName=g),g}),a()()()()),e&2&&(d(8),l("strong",!0),d(5),W("value",i.editedDepartment.departmentName),P("ngModel",i.editedDepartment.departmentName))},dependencies:[D,h,N,$,_,oe,T,me,x,F,se,de,k],encapsulation:2});let o=n;return o})();function Ne(o,n){if(o&1){let I=z();r(0,"ion-item")(1,"ion-grid")(2,"ion-row")(3,"ion-col",5),p(4),a(),r(5,"ion-col",6)(6,"ion-button",7),c("click",function(){let e=G(I).$implicit,i=V(2);return O(i.presentDepartmentActionSheet(e))}),f(7,"ion-icon",8),a()()()()()}if(o&2){let I=n.$implicit;d(4),R(" ",I.departmentName," ")}}function Me(o,n){if(o&1&&(r(0,"ion-list")(1,"ion-item")(2,"ion-grid")(3,"ion-row")(4,"ion-col"),p(5,"Department Name"),a()()()(),B(6,Ne,8,1,"ion-item",4),a()),o&2){let I=V();d(6),l("ngForOf",I.departments)}}function ye(o,n){o&1&&p(0," No Departments ")}var ve=(()=>{let n=class n{constructor(t,e,i,s){this._departmentService=t,this.actionSheetCtrl=e,this.modalCtrl=i,this._toastService=s,this.departments=[],this.editModeDepartmentId=null,ue({ellipsisVerticalSharp:fe})}ngOnInit(){this.loadDepartments()}loadDepartments(){this.departments=this._departmentService.getDepartments()}enterEditMode(t){this.editModeDepartmentId=t}presentDepartmentActionSheet(t){return j(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:t.departmentName,buttons:[{text:"Edit",handler:()=>this.openDepartmentEditModal(t.departmentID)},{text:"Delete",role:"destructive",handler:()=>this.onDelete(t.departmentID)},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}openDepartmentEditModal(t){return j(this,null,function*(){let e=yield this.modalCtrl.create({component:Ce,componentProps:{departmentID:t}});e.present();let{data:i,role:s}=yield e.onWillDismiss();s==="confirm"&&this.loadDepartments()})}onDelete(t){confirm("Are you sure you want to delete this department?")&&(this._departmentService.deleteDepartment(t),this.loadDepartments(),this._toastService.presentSuccessToast("Department deleted."))}};n.\u0275fac=function(e){return new(e||n)(m(v),m(le),m(w),m(C))},n.\u0275cmp=u({type:n,selectors:[["app-department-list"]],decls:8,vars:2,consts:[["noDepartmentsBlock",""],[1,"ion-card"],[1,"ion-text-center"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["size","10",1,"ion-align-self-center"],["size","2"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","ellipsis-vertical-sharp"]],template:function(e,i){if(e&1&&(r(0,"ion-card",1)(1,"ion-card-header",2)(2,"ion-card-title"),p(3," Department List "),a()(),r(4,"ion-card-content"),B(5,Me,7,1,"ion-list",3)(6,ye,1,0,"ng-template",null,0,J),a()()),e&2){let s=H(7);d(5),l("ngIf",i.departments.length>0)("ngIfElse",s)}},dependencies:[D,K,Q,h,M,E,b,y,x,F,_,ce,ae,pe,re],encapsulation:2});let o=n;return o})();var Ie=(()=>{let n=class n{constructor(t,e){this._departmentService=t,this._toastService=e,this.departmentForm=new Y({departmentName:new Z("",[S.required,S.minLength(2),S.maxLength(50)])})}ngOnInit(){this.capitalizeDepartmentName()}onSubmit(){this.departmentForm.valid?this._departmentService.checkDuplicates(this.departmentForm.controls.departmentName.value)?this._toastService.presentErrorToast("Department already exists."):(this._departmentService.createDepartment(this.departmentForm.value),this.departmentForm.reset(),this._departmentService.notifyDepartmentsChanged(),this._toastService.presentSuccessToast("Department created.")):this._toastService.presentErrorToast("Department failed to be created.")}capitalizeDepartmentName(){var t;(t=this.departmentForm.get("departmentName"))==null||t.valueChanges.subscribe(e=>{var i;e&&((i=this.departmentForm.get("departmentName"))==null||i.setValue(e.toUpperCase(),{emitEvent:!1}))})}};n.\u0275fac=function(e){return new(e||n)(m(v),m(C))},n.\u0275cmp=u({type:n,selectors:[["app-department-create"]],decls:9,vars:2,consts:[[1,"ion-card"],[1,"ion-text-center"],[3,"ngSubmit","formGroup"],["id","departmentName","label","Department Name","formControlName","departmentName","placeholder","Enter Department Name"],["expand","block","type","submit",3,"click","disabled"]],template:function(e,i){e&1&&(r(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-card-title"),p(3," Add New Department "),a()(),r(4,"ion-card-content")(5,"form",2),c("ngSubmit",function(){return i.onSubmit()}),f(6,"ion-input",3),r(7,"ion-button",4),c("click",function(){return i.onSubmit()}),p(8," Add Department "),a()()()()),e&2&&(d(5),l("formGroup",i.departmentForm),d(2),l("disabled",i.departmentForm.invalid))},dependencies:[D,h,ee,N,X,ie,te,ne,M,E,b,y,k,_],encapsulation:2});let o=n;return o})();var Ke=(()=>{let n=class n{constructor(){}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=u({type:n,selectors:[["app-departments"]],decls:4,vars:1,consts:[[3,"title"],[1,"ion-padding"]],template:function(e,i){e&1&&(f(0,"app-sidemenu",0),r(1,"ion-content",1),f(2,"app-department-create")(3,"app-department-list"),a()),e&2&&l("title","Departments")},dependencies:[De,T,ve,Ie],encapsulation:2});let o=n;return o})();export{Ke as DepartmentsComponent};
